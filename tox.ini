[tox]
isolated_build = True
env_list =
    py310
    py311
    py312
    py313
    py314
    lint
    build
labels =
    tests = py310, py311, py312, py313, py314

[testenv]
description = run unit tests
deps =
    pytest
    pytest-asyncio
commands =
    pytest {posargs:test}

[testenv:lint]
description = run code formatter and linter (auto-fix)
skip_install = true
deps =
    pre-commit-uv
commands =
    pre-commit run --all-files --show-diff-on-failure

[testenv:build]
description = verify package builds (sdist + wheel) and metadata
skip_install = true
deps =
    uv
    twine
commands =
    uv build --sdist --wheel --out-dir {toxinidir}\dist
    twine check --strict {toxinidir}\dist\*
